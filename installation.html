<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>CM3 Installation Notes</title>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html">
    <META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">
    <META HTTP-EQUIV="Resource-type" CONTENT="document"> 
    <META HTTP-EQUIV="Reply-to" CONTENT="m3-support@elego.de"> 
    <LINK HREF="normal.css" REL="stylesheet" TYPE="text/css">
    <META NAME="robots" content="noindex">
  </head>

  <body bgcolor="#ffffff">
    <h2>CM3 Installation Notes</h2>

    <p>
      CM3 5.1 comes as a full source distribution contained in a file
      named 
    </p>
    <blockquote><tt>cm3-src-all-CM3VERSION.tgz</tt>,</blockquote>
    <p>
      a considerably smaller standard distribution
    </p>
    <blockquote><tt>cm3-src-std-CM3VERSION.tgz</tt>,</blockquote>
    <p>
      a (big) system archive containing the compiler, linker, and
      debugger sources for those who just want to work on the tools 
    </p>
    <blockquote><tt>cm3-sys-std-CM3VERSION.tgz</tt>,</blockquote>
    <p>
      and several minimal binary installation archives named
    </p>
    <blockquote><tt>cm3-min-OSTYPE-TARGET-CM3VERSION.tgz</tt>.</blockquote>
    <p>
      The binary installation archives only contain the compiler,
      system support libraries (if needed), m3core, libm3, and the CM3
      installer. This should be everything for a minimal but still
      usable CM3 system. 
    </p>
    <p>
      You will need to download one of the binary installation
      archives suitable for your system, and any of the source
      archives you want. You can then use the minimal binary
      installation to build any of the packages contained in the
      source distributions. Some useful scripts have been added in the
      <tt>scripts</tt> subdirectory (contained in all the source and
      scripts distribution archives) to help with the installation and
      package build management.
    </p>
    <p>
      <b>Note:</b> Please verify the integrity of the downloaded
      archives by using the checksums and md5 hashes provided 
      <a href="checksums.php3">here</a>.
    </p>
    <p>
      If you have got the binary installation package, unpack it using
      the following command:
    </p>
    <pre>
  gzip -c -d cm3-min-OSTYPE-TARGET-CM3VERSION.tgz | tar xf -
    </pre>
    <p>
      You will then get the installation program
      (<tt>cminstall(.exe)</tt>), a copyright notice, a system archive
      (<tt>system.tgz</tt>) with the 
      precompiled standard libraries <tt>m3core</tt> and <tt>libm3</tt>.
      You can place additional archives,
      e.g. the doc distribution (<tt>cm3-doc-CM3VERSION.tgz</tt>) in
      the same directory. Start the installer with
    </p>
    <pre>
  ./cminstall
    </pre>
    <p>
      and answer all the questions. If the installation fails for any
      reason, send mail to <a
      href="mailto:m3-support{at}elego.de">m3-support{at}elego.de</a>. Keep in
      mind that this is still a pre-release and may not work as
      expected. As always, please include as much useful information
      as possible in your email, especially the log file written by
      cminstall and hardware/operating system information.
    </p>
    <p>
      If everything worked fine, extend your PATH and LD_LIBRARAY_PATH
      settings as needed, and unpack the source distribution
      archive(s) and install all the rest from source, for example
    </p>
    <pre>
  gzip -c -d cm3-src-XXX-CM3VERSION.tgz | tar xf -
  cd scripts
  PATH="${PATH}:/usr/local/cm3/bin"
  LD_LIBRARY_PATH="${LD_LIBRARY_PATH}:/usr/local/cm3/lib"
  more README
  ./do-cm3-std.sh -help
  ./do-cm3-std.sh buildship
    </pre>
    <p>
      If you want to upgrade the compiler itself, consider using the
      <tt>upgrade.sh</tt> script, and have a look at the <a
        href="upgrading.html">chapter about upgrading</a>.
    </p>
    <p>
      The latest scripts archive (as of today, 2001-04-08) contains
      also a simple cmd script to compile and install the standard
      packages on WIN32, do-cm3-std.cmd. This script is very
      simple. If anybody with some knowledge of win32 scripting feels
      encouraged to produce some more advanced scripts, this would be
      a very welcome contribution.
    </p>

    <p>
      <b>Note:</b> Please have a look at the
      <a href="known-problems.html">Known Problems Page</a>. If you
      encounter any problem or difficulty that isn't mentioned there,
      don't hesitate to contact <a
      href="mailto:m3-support{at}elego.de">m3-support{at}elego.de</a>, or --
      even better -- <a href="cm3-problem-report.html">file a problem
      report</a> (perferably with a working fix :-)
    </p>

    <h2>Platform Notes</h2>

    <h3>WIN32</h3>

    <p>
      CM3 (like any other currently available Modula-3 distribution)
      does not provide its own linker, as this is a standard system
      utility. Unfortunaltey, on WIN32 systems no linker is installed
      by default if you don't buy the Microsoft development tools.
      The NT386 target (which is the only one currently supported for the
      WIN32 platform) needs the Microsoft linker (and C compiler if
      you compile C sources) to be operable. It seems that the Borland
      linker (which is freely evailable) cannot be used without
      changes as it does not support the definition of entry
      points. This needs to be further investigated, though. Anybody
      who knows about other usable linkers or who gets M3 programs
      linked without the Microsoft tools should tell us.
    </p>

    <p>
      Anybody who would like to volunteer writing a linker for WIN32
      in Modula-3 would also be very welcome :-)
    </p>

    <p>
      If you want to use the build scripts provided in the scripts
      directory, you will also need a recent installation of the
      cygwin32 emulation environment, which is a good idea anyway,
      since it provides you with a more-or-less standard shell (bash)
      and an almost-POSIX programming environment. Cygwin32 has
      improved very much in recent years. It can be downloaded from <a
      href="http://www.cygwin.com/">http://www.cygwin.com/</a> and is
      easy to install. Future releases of CM3 5.1 may also feature a
      cygwin based build target as known from the PM3 distribution
      (NT386GNU).
    </p>

    <p>
      I have been told that recent versions of WinZip should be fine
      to unpack the gzipped tar archives of the distribution. However,
      there has been at least one report of failure and I haven't
      tried it myself, so I would recommend using the cygwin tools
      anyway. The cygwin environment mentionend above contains gnu tar
      and gzip that can be used to unpack the archive. As a last
      resort, here are some links to the (old versions of)
      <a href="win32-tools/gzip.exe" 
         type="application/octet-stream">gzip.exe</a>,
      <a href="win32-tools/tar.exe" 
         type="application/octet-stream">tar.exe</a>, and
      <a href="win32-tools/cygwin.dll" 
         type="application/octet-stream">cygwin.dll</a> that are also
      used by the binary installer itself. 
    </p>

    <h3>POSIX</h3>

    <p>
      This release (5.1.3) has been bootstrapped on FreeBSD3,
      LINUXLIBC6, and SOLgnu, where the majority of the supplied
      packages compiles. The newly ported compiler backend based on
      gcc 2.95.2 still seems to contains some minor problems, though,
      which need to be fixed.
    </p>

    <p>
      I have made no attempt to compile m3gdb yet. My experience is
      that it will take at least a week. The current m3gdb which
      exists as a port on FreeBSD (and is based on a much later
      version) is partially usable; it fails on displaying of several
      types (TEXTs, WIDECHARs, etc.) which have been changed in CM3
      5.1. I haven't even investigated yet if someone at Critical Mass
      has made changes to m3gdb to make it work again with the new
      system. 
    </p>

    <hr>
    <address><a href="mailto:m3-support{at}elego.de">m3-support{at}elego.de</a></address>
<!-- Created: Fri Feb 16 15:27:10 MET 2001 -->
  </body>
</html>
